<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Grocery Recommendation System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Quartz Bootswatch -->
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.3/dist/quartz/bootstrap.min.css" rel="stylesheet">

    <!-- Select2 -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0/dist/css/select2.min.css" rel="stylesheet">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: radial-gradient(circle at top, #1b2735, #090a0f);
            min-height: 100vh;
            color: #fff;
        }

        .hero {
            text-align: center;
            margin-bottom: 3rem;
        }

        .hero h1 {
            font-weight: 700;
            letter-spacing: 1px;
        }

        /* Glass card */
        .glass-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(14px);
            border-radius: 18px;
            border: 1px solid rgba(255,255,255,0.15);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }

        /* Button */
        .btn-glow {
            background: linear-gradient(135deg, #7f5cff, #4facfe);
            border: none;
            color: #fff;
            font-weight: 600;
            border-radius: 12px;
            padding: 12px;
            transition: all 0.3s ease;
        }

        .btn-glow:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(79,172,254,0.6);
        }

        /* =========================
           SELECT2 GLASS STYLING
        ========================== */

        /* Input box */
        .select2-container--default .select2-selection--single {
            height: 48px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.25);
            border-radius: 12px;
            display: flex;
            align-items: center;
            backdrop-filter: blur(12px);
        }

        .select2-selection__rendered {
            color: #fff !important;
            padding-left: 10px;
        }

        .select2-selection__arrow {
            top: 10px;
        }

        /* Dropdown panel */
        .select2-dropdown {
            background: rgba(20, 25, 40, 0.85);
            backdrop-filter: blur(14px);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.6);
        }

        /* Search box inside dropdown */
        .select2-search__field {
            background: rgba(255,255,255,0.08) !important;
            border: 1px solid rgba(255,255,255,0.2) !important;
            color: #fff !important;
            border-radius: 8px;
        }

        /* Dropdown options */
        .select2-results__option {
            color: #fff;
            padding: 10px;
        }

        .select2-results__option--highlighted {
            background: rgba(79, 172, 254, 0.4) !important;
            color: #fff;
        }

        .select2-results__option[aria-selected="true"] {
            background: rgba(127, 92, 255, 0.4) !important;
        }

        /* Recommendation cards */
        .rec-card {
            background: rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            height: 100%;
        }

        .rec-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }

        .score-text {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .empty {
            opacity: 0.75;
            font-style: italic;
        }
    </style>
</head>

<body>
<div class="container py-5">

    <!-- Header -->
    <div class="hero">
        <h1>üõí Grocery Recommendation System</h1>
        <p>ü•¶üõí Smart Grocery Picks üçûüßÄ</p>
    </div>

    <!-- Form -->
    <div class="row justify-content-center">
        <div class="col-md-7">
            <form method="POST" class="glass-card p-4 mb-5">

                <label class="form-label">Choose a Product</label>
                <select name="product" class="form-select searchable mb-4" required>
                    <option value=""></option>
                    {% for p in products %}
                    <option value="{{ p }}" {% if p == selected_product %}selected{% endif %}>
                        {{ p }}
                    </option>
                    {% endfor %}
                </select>

                <button class="btn btn-glow w-100">
                    Get Recommendations
                </button>
            </form>
        </div>
    </div>

    <!-- Results -->
    {% if selected_product %}
    <div class="text-center mb-4">
        <h5>Recommended for <b>{{ selected_product }}</b></h5>
    </div>
    {% endif %}

    <div class="row g-4">
        {% for r in recommendations %}
        <div class="col-lg-3 col-md-4 col-sm-6">
            <div class="rec-card">
                <h6>{{ r.product }}</h6>

                <span class="badge bg-{{ r.badge }} mt-2">
                    {{ r.label }}
                </span>

                <div class="score-text mt-2">
                    Score: {{ r.score }}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    {% if selected_product and recommendations|length == 0 %}
    <div class="text-center empty mt-4">
        No recommendations found.
    </div>
    {% endif %}

</div>

<!-- JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0/dist/js/select2.min.js"></script>

<script>
$('.searchable').select2({
    placeholder: "Search for a product",
    allowClear: true,
    width: "100%"
});
</script>

<!-- ================= DATASET OVERVIEW ================= -->
<div class="row justify-content-center mb-5">
    <div class="col-md-8">
        <div class="glass-card p-4 text-center">
            <h5 class="fw-semibold mb-2">üìä Dataset Overview</h5>
            <p class="small opacity-75">
                The recommendation engine is trained on real-world grocery
                transaction data capturing user purchase behavior. The dataset has 38765 rows of the purchase orders of people from the grocery stores. 
                These orders can be analysed and association rules can be generated using Market Basket Analysis by algorithms like Apriori Algorithm.
            </p>

            <div class="mt-3">
                <span class="badge bg-warning text-dark">Transactional Data</span>
                <span class="badge bg-info">Retail Domain</span>
            </div>
        </div>
    </div>
</div>

<!-- ================= RECOMMENDATION METHODS ================= -->
<div class="row g-4 mb-5">

    <div class="col-md-6">
        <div class="glass-card p-4 h-100">
            <h5 class="fw-semibold">üß∫ Market Basket Analysis</h5>
            <p class="small opacity-75 mb-0">
                Uses the Apriori algorithm to identify frequently co-purchased
                products based on historical transactions.
                Ideal for discovering product associations like
                <i>‚ÄúCustomers who bought milk also bought bread.‚Äù</i>
            </p>
        </div>
    </div>

    <div class="col-md-6">
        <div class="glass-card p-4 h-100">
            <h5 class="fw-semibold">ü§ù Collaborative Filtering</h5>
            <p class="small opacity-75 mb-0">
                Learns similarity patterns from user-item interactions.
                Products are recommended based on similarity scores learned
                from past purchase behavior.
            </p>
        </div>
    </div>

</div>


<!-- ================= HOW IT WORKS ================= -->
<div class="text-center mb-4">
    <h4 class="fw-semibold">‚öôÔ∏è How Recommendations Work</h4>
    <p class="small opacity-75">
        A hybrid approach combining transactional patterns and similarity learning
    </p>
</div>

<div class="row g-4 mb-5">

    <div class="col-md-3 col-sm-6">
        <div class="glass-card p-4 text-center h-100">
            <h5 class="mb-2">1Ô∏è‚É£ Select Product</h5>
            <p class="small opacity-75 mb-0">
                User selects a grocery item from the searchable dropdown list.
            </p>
        </div>
    </div>

    <div class="col-md-3 col-sm-6">
        <div class="glass-card p-4 text-center h-100">
            <h5 class="mb-2">2Ô∏è‚É£ Pattern Mining</h5>
            <p class="small opacity-75 mb-0">
                Apriori algorithm identifies frequently co-purchased items using association rules.
            </p>
        </div>
    </div>

    <div class="col-md-3 col-sm-6">
        <div class="glass-card p-4 text-center h-100">
            <h5 class="mb-2">3Ô∏è‚É£ Similarity Scoring</h5>
            <p class="small opacity-75 mb-0">
                Collaborative filtering ranks products by similarity score.
            </p>
        </div>
    </div>

    <div class="col-md-3 col-sm-6">
        <div class="glass-card p-4 text-center h-100">
            <h5 class="mb-2">4Ô∏è‚É£ Ranked Output</h5>
            <p class="small opacity-75 mb-0">
                Recommendations are ranked and labeled by relevance.
            </p>
        </div>
    </div>

</div>
<!-- ================= END HOW IT WORKS ================= -->

<footer class="text-center py-4">
    <div class="small opacity-75">
        Developed by Mansi Savdekar and Sunny Shirsath &copy; 2025
    </div>
</footer>

</body>
</html>
